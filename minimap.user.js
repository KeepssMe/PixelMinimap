// ==UserScript==
// @name Pixel Minimap
// @description OMG. I made a minimap. (At least I hope)
// @version 1.0.7
// @author KeepssMe | Thanks: Sallbet, Danvo
// @exclude https://git.pixelplanet.fun/
// @exclude https://*.pixelplanet.fun/globe
// @exclude https://fuckyouarkeros.fun/globe
// @exclude https://*.pixelplanet.fun/userarea
// @exclude https://fuckyouarkeros.fun/userarea
// @exclude https://*.pixelplanet.fun/chat
// @exclude https://fuckyouarkeros.fun/chat
// @exclude https://*.pixelplanet.fun/help
// @exclude https://fuckyouarkeros.fun/help
// @exclude https://*.pixelplanet.fun/settings
// @exclude https://fuckyouarkeros.fun/settings
// @match https://*.pixelplanet.fun/
// @match https://fuckyouarkeros.fun/
// @match https://pixelzone.io/
// @match https://pixelcanvas.io/
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @homepageURL https://github.com/KeepssMe/PixelMinimap
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class e{static o=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static u=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static p=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static m=()=>e.o().forEach((t=>e.p(t)));static getEntries=()=>e.o().reduce(((t,i)=>({...t,[i]:e.u(i)})),{})}class r{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),e=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),r=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),n=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),o=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),c=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),u=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),p=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),g=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),m=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),S=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{S:()=>t,A:()=>i,_:()=>s,T:()=>e,C:()=>r,M:()=>n,P:()=>h,O:()=>a,R:()=>o,k:()=>c,N:()=>u,D:()=>l,L:()=>f,I:()=>d,$:()=>p,V:()=>g,H:()=>m,U:()=>S}})();static F=0;static W=1;static B=2;static G=3;static X=4;static Y=5;static j=6;static K=0;static q=1;static Z=2;static J=3;static tt=4;static it=5;static#e(t){switch(t){case this.W:return this.#s.S();case this.B:return this.#s.A();case this.G:return this.#s._();case this.X:return this.#s.T();case this.Y:return this.#s.C();case this.j:return this.#s.M();default:return null}}st;et=r.F;nt=!0;ht=!0;#r=r.K;#n;#h;get ot(){return this.#r}async ct(t=!1){switch(this.#r){case r.K:return await this.#a();case r.tt:case r.it:return t?await this.#a():this.#h;default:return await this.#n}}async#a(){let t;return this.#h=void 0,this.#r=r.K,this.#n=new Promise((i=>{try{t=r.#i({[r.#s.P()]:"function"==typeof this.st?this.st(this):this.st,[r.#s.O()]:r.#e(this.et),[r.#s.k()]:!this.nt,[r.#s.R()]:this.ht,[r.#s.N()]:t=>{this.#r=t[r.#s.$()]},[r.#s.D()]:t=>{this.#r=r.it;const s=new n;s.ut=!0,i(s)},[r.#s.L()]:t=>{const s=new n;s.errorText=t[r.#s.V()],i(s)},[r.#s.I()]:t=>{const s=new n;s.ft=t[r.#s.H()],s.dt=t[r.#s.U()],i(s)}})}catch(t){const s=new n;s.gt=t,i(s)}})),this.#n.abort=t.abort,this.#h=await this.#n,this.#h}St(){this.#n?.abort()}yt(){const t=new r;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class n{dt=0;ft=null;ut=!1;errorText=null;gt=null;Et(){return this.errorText||this.gt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const o=new Error("Incorrect value type");function c(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=c(t[s]));return i;default:throw o}}function u(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!u(t[s],i[s])))return!1;return!0;default:throw o}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}class d{#o={};#c;constructor(t){this.#c=t+"_",e.o().filter((i=>i.startsWith(t))).forEach((t=>this.#o[t.slice(this.#c.length)]=e.u(t,void 0)))}#u(t){return this.#c+t}vt(t){return this.#o.hasOwnProperty(t)}u(t,i=null){return this.vt(t)?c(this.#o[t]):i}l(t,i){u(this.#o[t],i)||(e.l(this.#u(t),i),this.#o[t]=c(i))}p(t){delete this.#o[t],e.p(this.#u(t))}m(){for(let t of Object.keys(this.#o))delete this.#o[t],e.p(this.#u(t))}}class p{At=new Set;_t=new Set}class g{#l=new Map;wt(t,...i){const s=this.#l.get(t);if(!s)return;const{At:e,_t:r}=s;e.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),r.forEach((t=>e.delete(t))),0===e.size?this.#l.delete(t):r.clear()}Tt(t){return 0!==this.#l.get(t)?.At.size??!1}bt(t){return this.#l.get(t)?.At.size??0}Ct(t,i){return this.#f(t,i,!1)}xt(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let e=this.#l.get(t);e||(e=new p,this.#l.set(t,e));const{At:r,_t:n}=e;return r.has(i)||(r.add(i),s&&n.add(i)),this.Mt.bind(this,t,i)}Mt(t,i){const s=this.#l.get(t);if(!s)return;const{At:e,_t:r}=s;e.delete(i),r.delete(i),0===e.size&&this.#l.delete(t)}Pt(t){const i=this.#l.get(t);i&&(i.At.clear(),i._t.clear(),this.#l.delete(t))}}class m{Ot;Rt;translations}class S{static#d=1;static#p=new Map;static#g;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),e=s.i(i()),r=new Map;for(let t of e){if(this.#p[t.name])continue;const i=new m;i.Ot=t.name,i.Rt=t.langs,i.translations=t.translations,this.#p[i.Ot]=i,i.Rt.filter((t=>!r.has(t))).forEach((t=>r.set(t,i)))}this.#g=Object.values(this.#p)[0];for(let i of t.navigator.languages)if(r.has(i)){this.#g=r.get(i);break}}#m=new g;#S;constructor(){this.#S=S.#g}get translations(){return[...Object.values(S.#p)]}get kt(){return S.#g}get Nt(){return this.#S}set Nt(t){t instanceof m&&(t=t.Ot);let i=S.#p[t]??S.#g;this.#S!==i&&(this.#S=i,this.#m.wt(S.#d,i))}Dt(t){return this.#S.translations[t]??t}Lt(t){return this.#m.Ct(S.#d,t)}}class y{It;$t;Vt}class E{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{Ht:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),Ut:()=>t,Ft:()=>i,zt:()=>s}})();static Wt=1;static Bt=2;static#y(t,i){return t&&i&&t.It()===i.It()&&t.$t()===i.$t()&&t.Vt()===i.Vt()}#m=new g;#E=new r;#v;#A=()=>null;#_=[];#w=null;#T=null;constructor(t){this.#E.nt=!1,this.#E.ht=!0,this.#E.et=r.G,this.#E.st=E.#s.Ht.bind(E,t),this.Gt()}get Xt(){return[...this.#_]}get Yt(){return this.#w}get jt(){return this.#T}set jt(t){t instanceof y&&(t=t.It()),t=this.#A(t)??this.#w,E.#y(this.#T,t)||(this.#T=t,this.#m.wt(E.Wt,t))}async Gt(t=!1){t&&0!==this.#_.length||(this.#v??=this.#b(),await this.#v)}async#b(){const t=await this.#E.ct(!0);if(!t.ft)return void(this.#v=void 0);const i={};for(let s of t.ft){if(i[s[E.#s.Ut()]])continue;const t=new y;t.It=()=>s[E.#s.Ut()],t.$t=()=>s[E.#s.Ft()],t.Vt=()=>s[E.#s.zt()],i[t.It()]=t}this.#A=t=>i[t],this.#_=Object.values(i),this.#w=this.#_[0];const s=this.#T;this.#T=i[s?.It()]??this.#w,this.#m.wt(E.Bt,this.Xt),s&&!E.#y(s,this.#T)&&this.#m.wt(E.Wt,this.#T),this.#v=void 0}Kt(t){return this.#m.Ct(E.Wt,t)}qt(t){return this.#m.Ct(E.Bt,t)}}const v=new Map,A=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;for(let t of A){const i=t.getAttribute("viewKey"),s=t.cloneNode(!0);s.removeAttribute("viewKey"),v.set(i,s)}function _(t){return v.get(t)?.cloneNode(!0)}function w(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function T(t,i={},e=null,r=!1){if(r)return s.addElement(t,i,e);const n=document.createElement(t);if(i)for(let t of Object.keys(i))n.setAttribute(t,i[t]);return e&&e.insertAdjacentElement("beforeend",n),n}function b(t){const i=w(v.get("svgs"),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class C{Zt;Qt;Jt;ti;ii}class x{si;ei;ri;ni;hi}class M{static#C=1;static#x=2;static#M=3;static#P=4;static#O=5;static#R=6;static#k=7;static#N=8;static#D=9;static#L=10;static ai=["dark","darkmini"];static oi=200;static ci=300;static ui=30;#m=new g;li=_("movewin");fi=new C;di=new x;pi=w(this.li,".movewin_main");gi=w(this.li,".movewin_footer");#I=[!1,!0];#$=[0,0];#V=[M.ci,M.ci];#H=!1;#U=!1;#F=!0;constructor(){this.fi.Zt=w(this.li,".movewin_resizers"),this.fi.Qt=w(this.li,".movewin_resizer-lt"),this.fi.Jt=w(this.li,".movewin_resizer-rt"),this.fi.ti=w(this.li,".movewin_resizer-lb"),this.fi.ii=w(this.li,".movewin_resizer-rb"),this.di.si=w(this.li,".movewin_header"),this.di.ei=w(this.li,".movewin_header-info"),this.di.ri=w(this.li,".movewin_header-status"),this.di.ni=w(this.li,".movewin_header-mover"),this.di.hi=w(this.li,".movewin_header-button_minimize")}get mi(){return this.li.getAttribute("theme")}set mi(t){M.ai.includes(t)||(t=M.ai[0]),this.li.setAttribute("theme",t),this.#m.wt(M.#C,t)}get status(){return this.di.ri.textContent}set status(t){this.di.ri.textContent!==t&&(this.di.ri.textContent=t,this.#m.wt(M.#x,t))}get Si(){return[...this.#I]}set Si([t,i]){if(!this.li.parentElement)return void(this.#I=[t,i]);if(this.#I[0]===t&&this.#I[1]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();let r=t?{v:"left",r:"right",yi:s.left-e.left}:{v:"right",r:"left",yi:e.right-s.right},n=i?{v:"top",r:"bottom",yi:s.top-e.top}:{v:"bottom",r:"top",yi:e.bottom-s.bottom};this.#I=[t,i],this.#$=[r.yi,n.yi],this.li.style[r.v]=this.#$[0]+"px",this.li.style[r.r]=null,this.li.style[n.v]=this.#$[1]+"px",this.li.style[n.r]=null,this.#m.wt(M.#M,...this.#I),this.#m.wt(M.#P,...this.#$)}get Ei(){return[...this.#$]}get vi(){const t=this.li.getBoundingClientRect(),i=this.li.parentElement.getBoundingClientRect();return[this.#I[0]?t.left-i.left:i.right-t.right,this.#I[1]?t.top-i.top:i.bottom-t.bottom]}set Ei([t,i]){if(!this.li.parentElement)return void(this.#$=[t,i]);if(this.#$[0]===t&&this.#$[1]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();this.#$[0]=l(0,t,e.width-s.width),this.#$[1]=l(0,i,e.height-s.height),this.li.style[this.#I[0]?"left":"right"]=this.#$[0]+"px",this.li.style[this.#I[1]?"top":"bottom"]=this.#$[1]+"px",this.#m.wt(M.#P,t,i)}get size(){return[...this.#V]}get Ai(){const t=this.li.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.li.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();let r=this.#I[0]?e.right-s.left-(M.ui-Math.min(M.ui,s.left-e.left)):s.right-e.left-(M.ui-Math.min(M.ui,e.right-s.right)),n=this.#I[1]?e.bottom-s.top-(M.ui-Math.min(M.ui,s.top-e.top)):s.bottom-e.top-(M.ui-Math.min(M.ui,e.bottom-s.bottom));this.#V[0]=l(M.oi,t,r),this.#V[1]=l(M.oi,i,n),this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#m.wt(M.#R,...this.#V)}get _i(){return this.#H}get wi(){return this.di.ni.hidden}set _i(t){t!==this.#H&&(this.di.ni.hidden=t,this.#H=t,this.#m.wt(M.#N,t))}get Ti(){return this.#U}get bi(){return this.fi.Zt.hidden}set Ti(t){t!==this.#U&&(this.fi.Zt.hidden=t,this.#U=t,this.#m.wt(M.#D,t))}get Ci(){return this.#F}get xi(){return"none"===this.gi.style.display}set Ci(t){t!==this.#F&&(this.gi.style.display=t?"none":null,this.#F=t,this.#m.wt(M.#L,t))}Mi(i){const s=(()=>{let t=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect(),e=s.width-t.width,r=s.height-t.height,n=this.#I[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#I[1]?{v:"top",f:t=>t-o}:{v:"bottom",f:t=>o-t},a=i.clientX+s[n.v]-t[n.v],o=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,n.f(t),e),a=l(0,h.f(i),r);this.li.style[n.v]=s+"px",this.li.style[h.v]=a+"px",this.#m.wt(M.#O,s,a)}})(),e=t=>s(t.pageX,t.pageY),r=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#I[0]?(this.#$[0]=i.left-s.left,this.li.style.left=this.#$[0]+"px"):(this.#$[0]=s.right-i.right,this.li.style.right=this.#$[0]+"px"),this.#I[1]?(this.#$[1]=i.top-s.top,this.li.style.top=this.#$[1]+"px"):(this.#$[1]=s.bottom-i.bottom,this.li.style.bottom=this.#$[1]+"px"),this.#m.wt(M.#P,...this.#$),t.document.removeEventListener("mousemove",e),t.document.removeEventListener("mouseup",r),t.document.removeEventListener("touchmove",n),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},n=t=>e(t.touches[0]),h=t=>{1!==t.touches.length&&r()};t.document.addEventListener("mousemove",e),t.document.addEventListener("mouseup",r),t.document.addEventListener("touchmove",n),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}Pi(i,s,e){const r=(()=>{let t=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();const n=(s,e,n,h,a)=>{if(s!==e){let i=e?t.left-r.left:r.right-t.right;return()=>i}let o=n,c=M.ui,u=0,f=t=>t;s?(o=n,c-=Math.min(M.ui,r[h]-t[h]),u=t[h]-r[n]-M.oi,f=t=>t-d):(o=h,c-=Math.min(M.ui,t[n]-r[n]),u=r[h]-t[n]-M.oi,f=t=>d-t);let d=i[a]+r[o]-t[o];return t=>{const i=l(c,f(t),u);return this.li.style[o]=i+"px",i}},h=(s,e,n,h,a)=>{let o=t[h],c=t=>t,u=0;return s?(o+=i[a],c=t=>o-t,u=t[n]-r[e]-(M.ui-Math.min(M.ui,r[n]-t[n]))):(o-=i[a],c=t=>o+t,u=r[n]-t[e]-(M.ui-Math.min(M.ui,t[e]-r[e]))),t=>{const i=l(M.oi,c(t),u);return this.li.style[h]=i+"px",i}};let a=n(s,this.#I[0],"left","right","clientX"),o=n(e,this.#I[1],"top","bottom","clientY"),c=h(s,"left","right","width","clientX"),u=h(e,"top","bottom","height","clientY");return(t,i)=>{this.#m.wt(M.#O,a(t),o(i)),this.#m.wt(M.#k,c(t),u(i))}})(),n=t=>r(t.pageX,t.pageY),h=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#I[0]?(this.#$[0]=i.left-s.left,this.li.style.left=this.#$[0]+"px"):(this.#$[0]=s.right-i.right,this.li.style.right=this.#$[0]+"px"),this.#I[1]?(this.#$[1]=i.top-s.top,this.li.style.top=this.#$[1]+"px"):(this.#$[1]=s.bottom-i.bottom,this.li.style.bottom=this.#$[1]+"px"),this.#V=[i.width,i.height],this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#m.wt(M.#P,...this.#$),this.#m.wt(M.#R,...this.#V),t.document.removeEventListener("mousemove",n),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",o),t.document.removeEventListener("touchend",o),t.document.removeEventListener("touchcancel",o)},a=t=>n(t.touches[0]),o=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",n),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",o),t.document.addEventListener("touchend",o),t.document.addEventListener("touchcancel",o)}#z(){const t=this.li.parentElement.getBoundingClientRect(),i=(i,s,e,r,n,h)=>{const a=Math.max(M.oi,t[h]-M.ui),o=a>e?e:a,c=l(0,a-o,s);return this.li.style[h]=o+"px",this.li.style[i?r:n]=c+"px",[c,o]},[s,e]=i(this.#I[0],this.#$[0],this.#V[0],"left","right","width"),[r,n]=i(this.#I[1],this.#$[1],this.#V[1],"top","bottom","height");this.#m.wt(M.#O,s,r),this.#m.wt(M.#k,e,n)}Oi(t){return this.#m.Ct(M.#C,t)}Ri(t){return this.#m.Ct(M.#x,t)}ki(t){return this.#m.Ct(M.#M,t)}Ni(t){return this.#m.Ct(M.#P,t)}Di(t){return this.#m.Ct(M.#O,t)}Li(t){return this.#m.Ct(M.#R,t)}Ii(t){return this.#m.Ct(M.#k,t)}$i(t){return this.#m.Ct(M.#N,t)}Vi(t){return this.#m.Ct(M.#D,t)}Hi(t){return this.#m.Ct(M.#L,t)}Ui(i,s){i.insertAdjacentElement("afterbegin",this.li),this.li.style.zIndex=s,this.mi??=M.ai[0],this.li.style[this.#I[0]?"left":"right"]=this.#$[0]+"px",this.li.style[this.#I[1]?"top":"bottom"]=this.#$[1]+"px",this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.di.ni.hidden=this.#H,this.fi.Zt.hidden=this.#U,this.gi.style.display=this.#F?"none":null,this.#z(),this.di.ni.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t)})),this.di.ni.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0]))})),this.fi.Qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!0)})),this.fi.Qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!0))})),this.fi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!0)})),this.fi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!0))})),this.fi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!1)})),this.fi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!1))})),this.fi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!1)})),this.fi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#z.bind(this))}}class P{Fi;zi;Wi;constructor(t,i,s){this.Fi=t,h(i)||(this.zi=_(i)),this.Wi=_("minimapTabMenuButton"),this.Wi.textContent=s}}class O extends P{Bi;Zt;Qt;Jt;ti;ii;constructor(){super("main","minimapTabMain","Minimap"),this.Bi=w(this.zi,".minimap-tab_main_canvas"),this.Zt=w(this.zi,".minimap_inner_resizers"),this.Qt=w(this.Zt,".minimap_inner_resizer_lt"),this.Jt=w(this.Zt,".minimap_inner_resizer_rt"),this.ti=w(this.Zt,".minimap_inner_resizer_lb"),this.ii=w(this.Zt,".minimap_inner_resizer_rb")}}class R extends P{Gi;constructor(){super("menu","minimapTabMenu","Menu"),this.zi.style.display="none",this.Gi=w(this.zi,".minimap-tab_menu_buttons")}}class k extends P{Xi;Yi;ji;constructor(){super("settings","minimapTabSettings","Settings"),this.zi.style.display="none",this.Xi=w(this.zi,".minimap-tab_settings_details"),this.Yi=w(this.Xi,".minimap-settings"),this.ji=w(this.Xi,".minimap-settings-reset")}}class N extends P{Xi;constructor(){super("artlist","minimapTabArtList","Art list"),this.zi.style.display="none",this.Xi=w(this.zi,".minimap-tab_artlist_detail")}}class D extends P{Xi;Ki;qi;Zi;Qi;Ji;ts;ss;ss;es;rs;ns;ji;constructor(){super("info","minimapTabInfo","Info"),this.zi.style.display="none",this.Xi=w(this.zi,".minimap-tab_info-details"),this.Ki=w(this.Xi,".minimap-info-versions"),this.qi=w(this.Ki,".minimap-info-script_version"),this.Zi=w(this.Ki,".minimap-info-minimap_version"),this.Qi=w(this.Xi,".minimap-info-readme"),this.Ji=w(this.Qi,".minimap-info-readme-tm"),this.ts=w(this.Qi,".minimap-info-readme-info"),this.ss=w(this.Qi,".minimap-info-readme-links"),this.es=w(this.Xi,".minimap-info-main-functions"),this.rs=w(this.es,".minimap-info-functions-title"),this.ns=w(this.es,".minimap-info-functions-details"),this.ji=w(this.Xi,".minimap-script-reset")}}class L{gi;hs;os;cs;us;constructor(){this.gi=_("minimap_footer"),this.hs=w(this.gi,".minimap_footer_button",0),this.os=w(this.gi,".minimap_footer_button",1),this.cs=w(this.gi,".minimap_fast-functions"),this.us=w(this.cs,".minimap_fast-functions_content"),this.hs.style.display="none",this.os.style.display="none",this.cs.addEventListener("wheel",(t=>{t.preventDefault(),this.#W(t.deltaY<0)})),this.hs.addEventListener("click",(t=>{t.preventDefault(),this.#W(!0)})),this.os.addEventListener("click",(t=>{t.preventDefault(),this.#W(!1)}))}#W(t){const i=[...this.us.children],s=i.reduce(((t,i)=>t+i.getBoundingClientRect().width),0)/i.length;this.cs.scrollLeft+=s*(t?-1:1)}ls(){const t=this.gi.getBoundingClientRect();if(this.us.getBoundingClientRect().width<=t.width)return this.hs.style.display="none",void(this.os.style.display="none");this.hs.style.display=null,this.os.style.display=null}}class I extends M{static#B=1;static#G=2;static fs=5e3;#m=new g;#p;ds=new O;ps=new R;gs=new k;Ss;ys=new D;Es=new L;vs=T("button");As=T("button");#X=new Map;#Y=this.ds;#j=this.ds;#K;#q=I.fs;constructor(t,i){super(),this.#p=t,this.Ci=!1,this.vs.insertAdjacentElement("afterbegin",b("menu")),this.di.ei.insertAdjacentElement("beforebegin",this.vs),this.As.style.display="none",this.As.insertAdjacentElement("afterbegin",b("close")),this.di.ei.insertAdjacentElement("afterend",this.As),this.gi.insertAdjacentElement("beforeend",this.Es.gi),this.#p.Lt(this.#Z.bind(this));let s=[this.ds,this.gs];i&&(this.Ss=new N,s.push(this.Ss)),s.push(this.ys),this.pi.insertAdjacentElement("beforeend",this.ps.zi),this.#X.set(this.ps.Fi,this.ps);for(let t of s)this.pi.insertAdjacentElement("beforeend",t.zi),this.#X.set(t.Fi,t),this.ps.Gi.insertAdjacentElement("beforeend",t.Wi),t.Wi.addEventListener("click",(()=>this._s(t,!1)));this.vs.addEventListener("click",(()=>{this.#j===this.ps?this._s(this.#Y,!1):this._s(this.ps,!1)})),this.As.addEventListener("click",(()=>this._s(this.ds,!1))),this.li.addEventListener("mouseenter",(()=>clearTimeout(this.#K))),this.li.addEventListener("mouseleave",(()=>{this.#j!==this.ds&&this.#q&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this._s(this.ds,!1)),this.#q))})),this.Vi((t=>this.ds.Zt.hidden=t)),this.#Z()}_s(t,i=!1){t instanceof P&&(t=t.Fi);let s=this.#X.get(t)??this.ds;this.As.style.display=s===this.ds?"none":null,s.zi.style.display=null,this.#j.zi.style.display="none",this.#Y=this.#j,this.#j=s,this.status=this.#p.Dt(`tab_${s.Fi}`),this.#m.wt(I.#B,s),i&&this.#j!==this.ds&&this.#q&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this._s(this.ds,!1)),this.#q))}#Z(){this.status=this.#p.Dt(`tab_${this.#j.Fi}`);for(let t of this.#X.values())t.Wi.textContent=this.#p.Dt(`tab_${t.Fi}`);this.gs.ji.textContent=this.#p.Dt("resetSettings")}get ws(){return this.#j}get Ts(){return this.#q}set Ts(t){this.#q!==t&&(this.#q=t,this.#m.wt(I.#G,this.#q))}bs(t){return this.#m.Ct(I.#B,t)}Cs(t){return this.#m.Ct(I.#G,t)}Ui(t,i){super.Ui(t,i),this.ds.Qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!0)})),this.ds.Qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!0))})),this.ds.Qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!0,!0],this.Ei=[0,0]})),this.fi.Qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!0,!0],this.Ei=[0,0]})),this.ds.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!0)})),this.ds.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!0))})),this.ds.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!1,!0],this.Ei=[0,0]})),this.fi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!1,!0],this.Ei=[0,0]})),this.ds.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!1)})),this.ds.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!1))})),this.ds.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!0,!1],this.Ei=[0,0]})),this.fi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!0,!1],this.Ei=[0,0]})),this.ds.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!1)})),this.ds.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!1))})),this.ds.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!1,!1],this.Ei=[0,0]})),this.fi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.Si=[!1,!1],this.Ei=[0,0]})),this.Ii(this.Es.ls.bind(this.Es)),this.Es.ls()}}class ${static#Q=1;#m=new g;Bi;#J;constructor(){this.Bi=_("overlay")}get xs(){return this.#J}set xs(t){this.#J!==t&&(this.#J=t,this.Bi.style.opacity=1-t/100,this.#m.wt($.#Q,t))}Ms(t){return this.#m.Ct($.#Q,t)}Ui(t,i=null){t.insertAdjacentElement("afterbegin",this.Bi),this.Bi.style.zIndex=i??"auto"}}const V="setting_";class H{Ps;Os;Rs;ks;constructor(t){this.Ps=t,this.Os=_("minimapSetting"),this.Rs=w(this.Os,".minimap-setting_name"),this.ks=w(this.Os,".minimap-setting_value")}Ns(t){const i=t.Dt(`${V}${this.Ps}`);i.endsWith(":")?this.Rs.textContent=i.substring(0,i.length-1)+"  ":this.Rs.textContent=i+": "}}class U extends H{Ds;Ls=new Map;Is;constructor(t,i,s){super(t),this.Ds=_("minimapTabSettingsSelectSetting"),this.ks.insertAdjacentElement("beforeend",this.Ds),this.Is=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.Ds.insertAdjacentElement("beforeend",s),this.Ls.set(t,{$s:s,action:i})}this.Ds.value=Object.keys(s)[0],this.Ds.addEventListener("change",(()=>this.Vs(this.Ds.value,!0)))}Vs(t,i){let s=this.Ls.get(t);h(s)||(this.Ds.value=s.$s.value,i&&s.action())}Ns(t){if(super.Ns(t),this.Is)for(let{$s:i}of this.Ls.values())i.textContent=t.Dt(`${V}${this.Ps}_${i.value}`)}}class F extends H{Hs;$input;Us;#tt;#it;constructor(t,i,s){super(t),this.Hs=_("minimapTabSettingsSwitchSetting"),this.ks.insertAdjacentElement("beforeend",this.Hs),this.$input=w(this.Hs,"input"),this.Us=w(this.Hs,"span"),this.#tt=i,this.#it=s,this.$input.addEventListener("change",(()=>this.Vs(this.$input.checked,!0)))}Vs(t,i){this.$input.checked=t,i&&(t?this.#tt():this.#it())}}class z extends H{Fs;zs;Ws;#st;#et;#rt;#nt;constructor(t,i,s,e,r){super(t),this.Fs=_("minimapTabSettingsRangeSetting"),this.ks.insertAdjacentElement("beforeend",this.Fs),this.zs=w(this.Fs,"input"),this.Ws=w(this.Fs,"output"),this.zs.min=s,this.zs.max=e,this.zs.step=r,this.zs.value=s,this.Ws.value=s,this.#et=s,this.#rt=e,this.#nt=r,this.#st=i,this.zs.addEventListener("input",(t=>this.l(parseInt(this.zs.value),!0)))}l(t,i){t<this.#et||t>this.#rt||(t-this.#et)%this.#nt!=0||(this.zs.value=t,this.Ws.value=t,i&&this.#st(t))}}class W{Bs;Xi;Gs;constructor(t){this.Bs=t,this.Xi=_("minimapTabSettingsGroup"),this.Gs=w(this.Xi,"summary",0)}Ns(t){this.Gs.textContent=t.Dt(`settingGroup_${this.Bs}`)}}class B{#ht;#at=new Map;#ot=new Map;#ct;constructor(t,i){this.#ht=t,this.#ct=i,this.#ht.Lt(this.#Z.bind(this))}Xs(t,i,s){if(this.#ot.has(t))return null;const e=new U(t,i,s);return this.#ot.set(t,e),e}Ys(t){const i=this.#ot.get(t);return i instanceof U?i:null}js(t,i,s){if(this.#ot.has(t))return null;const e=new F(t,i,s);return this.#ot.set(t,e),e}Ks(t){const i=this.#ot.get(t);return i instanceof F?i:null}qs(t,i,s,e,r){if(this.#ot.has(t))return null;const n=new z(t,i,s,e,r);return this.#ot.set(t,n),n}Ks(t){const i=this.#ot.get(t);return i instanceof z?i:null}Zs(t){this.#ct.textContent="";for(let[i,s]of Object.entries(t)){const t=new W(i);this.#at.set(i,t),this.#ct.insertAdjacentElement("beforeend",t.Xi);for(let i of s){const s=this.#ot.get(i);s&&t.Xi.insertAdjacentElement("beforeend",s.Os)}}this.#Z()}#Z(){for(let t of this.#at.values())t.Ns(this.#ht);for(let t of this.#ot.values())t.Ns(this.#ht)}}class G{Qs;Js;action;te=_("minimapFastFunction")}class X{#ut;#lt=new Map;ie;constructor(t,i){this.#ut=t;for(let[t,{se:s,ee:e,action:r}]of Object.entries(i)){const i=new G;i.Qs=t,i.Js=s,i.action=r;const n=_("minimapFastFunctionImage");n.setAttribute("src","https://raw.githubusercontent.com/KeepssMe/PixelMinimap/master/images/"+e),i.te.appendChild(n),this.#lt.set(t,i),i.te.addEventListener("click",(()=>this.re(i.Js,!0)))}this.ie=this.#lt.get(Object.keys(i)[0])}re(t,i){const s=this.#lt.get(t);s!==this.ie&&(this.ie.te.parentElement&&(this.ie.te.insertAdjacentElement("afterend",s.te),this.ie.te.parentElement.removeChild(this.ie.te)),this.ie=s,i&&this.ie.action())}}class Y{#ft=new Map;#dt;constructor(t){this.#dt=t}ne(t,i){if(this.#ft.has(t))return null;const s=new X(t,i);return this.#ft.set(t,s),s}he(t){const i=this.#ft.get(t);return i instanceof X?i:null}ae(t){this.#dt.textContent="";for(let i of t){const t=this.#ft.get(i);t&&this.#dt.appendChild(t.ie.te)}}}class j{static#pt="info_functions_";#gt;#ht;#mt;#ft=new Map;constructor(t,i,s,e){this.#gt=t,this.#ht=i,this.#mt=[s,e],this.#gt.es.style.display="none",this.#ht.Lt(this.#St.bind(this)),this.#St()}oe(t){this.#gt.ss.textContent="",this.#ht.translations.forEach((i=>{const s=_("minimapInfoLink");s.href="https://github.com/KeepssMe/PixelMinimap/blob/master/readmes/canvases/"+t+"/README_"+i.Ot.toUpperCase()+".md",s.textContent=i.translations["setting_lang_"+i.Ot],this.#gt.ss.appendChild(s)}))}ne(t,i){if(this.#gt.es.style.display=null,this.#ft.has(t)){const s=this.#ft.get(t);s[1]=i,s[0].textContent="> "+this.#ht.Dt(j.#pt+s[1])}else{const s=_("minimapInfoFunction");s.textContent="> "+this.#ht.Dt(j.#pt+i),this.#ft.set(t,[s,i]),this.#gt.ns.appendChild(s)}}#St(){this.#gt.qi.textContent=this.#ht.Dt("info_scriptVersion")+": "+this.#mt[0],this.#gt.Zi.textContent=this.#ht.Dt("info_minimapVersion")+": "+this.#mt[1],this.#gt.Ji.textContent=this.#ht.Dt("info_configurationTM"),this.#gt.ts.textContent=this.#ht.Dt("info_readmeInfo"),this.#gt.rs.textContent=this.#ht.Dt("info_functionsTitle")+":",this.#ft.forEach((t=>{t[0].textContent="> "+this.#ht.Dt(j.#pt+t[1])})),this.#gt.ji.textContent=this.#ht.Dt("resetScriptTitle")}}class K{ce;ue;le;fe;de;pe;translations;Xt;ge;me;Se;ye;Ee;constructor(i,r,n,h){this.ce=s.info.script.version,e.l("version",this.ce),this.ue=i,this.de=new q,this.pe=new d(r),this.le=!this.pe.vt("version"),this.fe=this.le||!u(this.pe.u("version"),this.ue),this.fe&&(this.pe.m(),this.pe.l("version",this.ue)),this.translations=new S,this.Xt=new E(n),this.ge=new I(this.translations,h),this.me=new $,this.Se=new B(this.translations,this.ge.gs.Yi),this.ye=new Y(this.ge.Es.us),this.Ee=new j(this.ge.ys,this.translations,this.ce,this.ue),this.ge.ys.ji.addEventListener("click",(()=>{t.confirm(this.translations.Dt("resetScript"))&&(e.m(),t.location.reload())}))}ve(){return this.translations.Nt=this.translations.kt,this.Xt.jt=this.Xt.Yt,this.ge.mi=M.ai[0],this.ge.Si=[!1,!0],this.ge.Ei=[0,0],this.ge.size=[M.ci,M.ci],this.ge._i=!1,this.ge.Ti=!1,this.ge.Ts=I.fs,this.me.xs=0,!1}Ae(){this.translations.Nt=this.translations.kt,this.Xt.jt=this.Xt.Yt,this.ge.mi=M.ai[0],this.ge.Si=[!1,!0],this.ge.Ei=[0,0],this.ge.size=[M.ci,M.ci],this.ge._i=!1,this.ge.Ti=!1,this.ge.Ts=I.fs,this.me.xs=0}bind(){this.translations.Nt=this.pe.u("lang",this.translations.Nt),this.pe.l("lang",this.translations.Nt.Ot),this.translations.Lt((t=>this.pe.l("lang",t.Ot)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Xt.jt=this.pe.u(t(),this.Xt.jt),this.pe.l(t(),this.Xt.jt.It()),this.Xt.Kt((i=>this.pe.l(t(),i.It()))),this.ge.mi=this.pe.u("theme",this.ge.mi),this.ge.Si=this.pe.u("pos",this.ge.Si),this.ge.Ei=this.pe.u("xy",this.ge.Ei),this.ge.size=this.pe.u("size",this.ge.size),this.ge._i=this.pe.u("isHideMover",this.ge._i),this.ge.Ti=this.pe.u("isHideResizers",this.ge.Ti),this.ge.Ts=this.pe.u("millisecondsTabSwitchDelay",this.ge.Ts),this.pe.l("millisecondsTabSwitchDelay",this.ge.Ts),this.ge.Cs((t=>this.pe.l("millisecondsTabSwitchDelay",t))),this.me.xs=this.pe.u("overlayTransparency",this.me.xs),this.pe.l("overlayTransparency",this.me.xs),this.me.Ms((t=>this.pe.l("overlayTransparency",t)))}_e(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.le&&this.ge._s(this.ge.ys,!1)}we(){this.ge.Oi((t=>this.pe.l("theme",t))),this.pe.l("theme",this.ge.mi),this.ge.ki(((t,i)=>this.pe.l("pos",[t,i]))),this.pe.l("pos",this.ge.Si),this.ge.Ni(((t,i)=>this.pe.l("xy",[t,i]))),this.pe.l("xy",this.ge.Ei),this.ge.Li(((t,i)=>this.pe.l("size",[t,i]))),this.pe.l("size",this.ge.size),this.ge.$i((t=>this.pe.l("isHideMover",t))),this.pe.l("isHideMover",this.ge._i),this.ge.Vi((t=>this.pe.l("isHideResizers",t))),this.pe.l("isHideResizers",this.ge.Ti)}Te(){const t=this.Se.Xs("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.Ot]:()=>this.translations.Nt=i})),{}));t.Vs(this.translations.Nt.Ot,!1),this.translations.Lt((i=>t.Vs(i.Ot,!1)));const i=this.Se.Xs(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Xt.Xt.reduce(((t,i)=>({...t,[i.It()]:()=>this.Xt.jt=i})),{}));i.Vs(this.Xt.jt.It(),!1),this.Xt.Kt((t=>i.Vs(t.It(),!1)));const s=this.Se.Xs("theme",!1,I.ai.reduce(((t,i)=>({...t,[i]:()=>this.ge.mi=i})),{}));s.Vs(this.ge.mi,!1),this.ge.Oi((t=>s.Vs(t,!1)));const e=this.Se.Xs("fixAngle",!0,{lt:()=>{this.ge.Si=[!0,!0],this.ge.Ei=[0,0]},rt:()=>{this.ge.Si=[!1,!0],this.ge.Ei=[0,0]},lb:()=>{this.ge.Si=[!0,!1],this.ge.Ei=[0,0]},rb:()=>{this.ge.Si=[!1,!1],this.ge.Ei=[0,0]}});e.Vs(`${this.ge.Si[0]?"l":"r"}${this.ge.Si[1]?"t":"b"}`,!1),this.ge.ki(((t,i)=>e.Vs(`${t?"l":"r"}${i?"t":"b"}`,!1)));const r=this.Se.js("lockMove",(()=>this.ge._i=!0),(()=>this.ge._i=!1));r.Vs(this.ge._i,!1),this.ge.$i((t=>r.Vs(t,!1)));const n=this.Se.js("lockSize",(()=>this.ge.Ti=!0),(()=>this.ge.Ti=!1));n.Vs(this.ge.Ti,!1),this.ge.Vi((t=>n.Vs(t,!1)));const h=this.Se.qs("overlayTransparency",(t=>this.me.xs=t),0,100,1);h.l(this.me.xs,!1),this.me.Ms((t=>h.l(t,!1)));const a=this.Se.qs("secondsTabSwitchDelay",(t=>this.ge.Ts=1e3*t),0,60,1);a.l(this.ge.Ts/1e3,!1),this.ge.Cs((t=>a.l(t/1e3,!1)))}be(){}}class q{Ce;xe;constructor(){this.Ce=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.xe=!1,t.document.addEventListener("touchstart",(()=>this.xe=!0),{once:!0})}}const Z=256,Q=768,J=([t,i])=>i<<8|t,tt=([t,i],s)=>{const e=s>>1;return[t+e,i+e]},it=([t,i],s=256)=>i*s+t,st=([t,i])=>({Me:Math.floor(t/Z),Pe:Math.floor(i/Z),Oe:t%Z,Re:i%Z}),et=new g;class rt{static#yt=t.Function.prototype.apply;static#Et=new Proxy(this.#yt,{apply(t,i,s){et.wt(1,t,i,s);const e=Reflect.apply(t,i,s);return et.wt(2,t,i,s,e),e}});static#vt=t.Function.prototype.call;static#At=new Proxy(this.#vt,{apply(t,i,s){et.wt(3,t,i,s);const e=Reflect.apply(t,i,s);return et.wt(4,t,i,s,e),e}});static#_t=!1;static#wt=!1;static#Tt(i){this.#_t!==i&&(i||!et.Tt(1)&&!et.Tt(2))&&(t.Function.prototype.apply=i?this.#Et:this.#yt,this.#_t=i)}static#bt(i){this.#wt!==i&&(i||!et.Tt(3)&&!et.Tt(4))&&(t.Function.prototype.call=i?this.#At:this.#vt,this.#wt=i)}static get ke(){return this.#yt}static get Ne(){return this.#vt}static De(t){this.#Tt(!0);const i=et.Ct(1,t);return()=>{i(),this.#Tt(!1)}}static Le(t){this.#Tt(!0);const i=et.Ct(2,t);return()=>{i(),this.#Tt(!1)}}static Ie(t){this.#bt(!0);const i=et.Ct(3,t);return()=>{i(),this.#bt(!1)}}static $e(t){this.#bt(!0);const i=et.Ct(4,t);return()=>{i(),this.#bt(!1)}}}class nt{static#Ct=t.Array.prototype.map;static#xt=new Proxy(this.#Ct,{apply(t,i,s){et.wt(5,t,i,s);const e=Reflect.apply(t,i,s);return et.wt(6,t,i,s,e),e}});static#Mt=!1;static#Pt(i){this.#Mt!==i&&(i||!et.Tt(5)&&!6..Tt(2))&&(t.Array.prototype.map=i?this.#xt:this.#Ct,this.#Mt=i)}static get Ve(){return this.#Ct}static He(t){this.#Pt(!0);const i=et.Ct(5,t);return()=>{i(),this.#Pt(!1)}}static Ue(t){this.#Pt(!0);const i=et.Ct(6,t);return()=>{i(),this.#Pt(!1)}}}class ht{static#Ot=t.WebSocket;static#Rt=t.WebSocket.prototype.send;static#kt=new Proxy(this.#Ot,{construct(t,i){const s=new t(...i);return ht.#Nt(s)&&et.wt(7,s,!0),s}});static#Dt=new Proxy(this.#Rt,{apply:(t,i,s)=>(ht.#Nt(i)&&et.wt(7,i,!1),i.send(...s))});static#Lt=!1;static#It=new Set;static#Nt(t){return t.send=this.#Rt.bind(t),!this.#It.has(t)&&(this.#It.add(t),t.addEventListener("close",(()=>this.#It.delete(t))),!0)}static#$t(i){this.#Lt!==i&&(!i&&et.Tt(7)||(i?(t.WebSocket.prototype.send=this.#Dt,t.WebSocket=this.#kt):(t.WebSocket=this.#Ot,t.WebSocket.prototype.send=this.#Rt),this.#Lt=i))}static get Fe(){return this.#Ot}static get ze(){return this.#Rt}static get We(){return[...this.#It]}static Be(t){this.#$t(!0);const i=et.Ct(7,t);return()=>{i(),this.#$t(!1)}}}class at{static#Vt=t.Response.prototype.arrayBuffer;static#Ht=new Proxy(this.#Vt,{async apply(t,i,s){const e=await t.apply(i,s);return et.wt(9,i,e),e}});static#Ut=!1;static#Ft(i){this.#Ut!==i&&(!i&&et.Tt(9)||(t.Response.prototype.arrayBuffer=i?this.#Ht:this.#Vt,this.#Ut=i))}static get Ge(){return this.#Vt}static Xe(t){this.#Ft(!0);const i=et.Ct(9,t);return()=>{i(),this.#Ft(!1)}}}class ot{static#zt=t.Node.prototype.appendChild;static#Wt=new Proxy(this.#zt,{apply(t,i,s){const e=Reflect.apply(t,i,s);return et.wt(8,i,e),e}});static#Bt=!1;static#Gt(i){this.#Bt!==i&&(!i&&et.Tt(8)||(t.Node.prototype.appendChild=i?this.#Wt:this.#zt,this.#Bt=i))}static get Ye(){return this.#zt}static je(t){this.#Gt(!0);const i=et.Ct(8,t);return()=>{i(),this.#Gt(!1)}}}class ct{canvasId;Ke;qe;Ze;Qe;Je;tr;get ir(){return this.qe>>1}}class ut{coords;sr;er=!1;rr=!1}class lt{static#Xt=1;static#Yt=2;static#jt=3;static#Kt=4;static#qt=5;static#Zt=6;static#Qt=7;static#Jt=8;static#ti=9;static#ii=10;static#si=160;static#ei=161;static#ri=162;static#ni=163;static#hi=164;static#ai=145;static#oi=!1;static#m;static#ci;static#ui;static#li;static#fi;static#di;static#pi;static#gi;static#mi;static#Si;static#yi;static init(i){if(this.#oi)return;this.#oi=!0,this.#m=new g,this.#gi=new Map,this.#Si=new Map,this.#Ei(),this.#vi();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),e=this.nr("s/REC_ME",(t=>{e(),Object.entries(t.canvases).forEach((([t,e])=>{const r=new ct;r.canvasId=parseInt(t),r.Ke=e.ident,r.qe=e.size,r.Ze=e.cli??0,r.Qe=e.v??!1,r.Je=i&&s.has(r.canvasId)?s.get(r.canvasId):e.colors,r.tr=e.colors.map((([t,i,s],e)=>{if(e<r.Ze){let e=r.Je.slice(r.Ze).map(((t,i)=>[t,i])).filter((([[e,r,n]])=>t===e&&i===r&&s===n))[0];if(e)return e[1]+r.Ze}return e})),this.#gi.set(r.canvasId,r)}))})),r=this.hr("s/REC_ME",(()=>{r();const t=this.ar.canvas;this.#Ai(parseInt(t.canvasId));const i=t.view;this.#pi=[i[0],i[1]],this.#di=i[2]}));this.hr("s/SELECT_CANVAS",(()=>this.#Ai(parseInt(this.ar.canvas.canvasId))));const n=/((pixelplanet|fuckyouarkeros)\.fun|cdn\.gs-os\.com)\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;at.Xe(((t,i)=>{if(n.test(t.url)){const s=t.url.match(n).groups;if(lt.#mi&&(lt.#mi.Qe||lt.#mi.canvasId!==parseInt(s.c)))return;const e=parseInt(s.x),r=parseInt(s.y);let h=lt.cr([e,r]);h||(h=new ut,h.coords=[e,r],lt.#Si.set(J(h.coords),h)),h.rr=!0,h.sr=new Uint8ClampedArray(65536),h.sr.set(new Uint8ClampedArray(i)),lt.#m.wt(lt.#qt,h)}})),ot.je(((i,s)=>{if(i!==t.document.body||!s.classList.contains("viewport"))return;const e=this.#yi;this.#yi=s,this.#m.wt(lt.#ii,e,this.#yi)})),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#di=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#pi=t))}))}static#Ei(){const t=nt.He(((i,s,e)=>{s.every((t=>"function"==typeof t))&&s.length>5&&(s.splice(2,0,(t=>(this.#ci=t,this.#m.wt(this.#Xt,this.#ci),this.#li=!0,t=>(this.#ui=i=>{if(this.#li){let s=i.type;return this.#m.wt(`${this.#Yt}_${s}`,i),t(i),void this.#m.wt(`${this.#jt}_${s}`,i)}t(i)},this.#ui)))),t())}))}static#vi(){const t=/(pixelplanet|fuckyouarkeros)\.fun/;ht.Be((i=>{if(t.test(i.url)){this.#fi=i;const t=i.send,s=this.#_i.bind(this),e=s=>{t.call(i,s),this.#wi(s)},r=()=>{i.removeEventListener("message",s),i.send=t,i.removeEventListener("close",r),this.#fi===i&&this.#fi};i.send=e,i.addEventListener("message",s),i.addEventListener("close",r),this.#m.wt(this.#Kt,i)}}))}static#_i(t){t.data instanceof ArrayBuffer&&this.#Ti(new Uint8ClampedArray(t.data))}static#Ti(t){switch(t[0]){case this.#ai:{const[i,s,e]=this.#bi(t);let r=this.cr([i,s])?.sr;r&&(e.forEach((([t,i,s])=>r[it([t,i])]=s)),this.#m.wt(this.#ti,i,s,e));break}}}static#bi(t){const i=t[1],s=t[2],e=[];let r=3;for(;++r<t.byteLength;){const i=t[r++],s=t[r++],n=t[r++];e.push([s,i,n])}return[i,s,e]}static#wi(t){t instanceof ArrayBuffer&&this.#Ci(new Uint8Array(t))}static#Ci(t){switch(t[0]){case this.#si:{const i=this.#xi(t);this.#Ai(i);break}case this.#ei:{if(this.#mi.Qe)return;const i=this.#Mi(t),s=this.#Pi(i);this.#m.wt(this.#Zt,[s]);break}case this.#ni:{if(this.#mi.Qe)return;const i=this.#Oi(t),s=[];for(let t of i)s.push(this.#Pi(t));this.#m.wt(this.#Zt,s);break}case this.#hi:{if(this.#mi.Qe)return;const i=this.#Ri(t);for(let t of i)this.#ki(t);this.#m.wt(this.#Qt,i);break}}}static#xi(t){return t[1]}static#Mi(t){return[t[1],t[2]]}static#Oi(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#Ri(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#Pi([t,i]){let s=this.cr([t,i]);return s||(s=new ut,s.coords=[t,i],this.#Si.set(J(s.coords),s)),s.er=!0,s}static#ki(t){this.#Si.delete(J(t))}static get ar(){return this.#ci.getState()}static ur(t,i=!1,s=!0){this.#li=i,(s?this.#ui:this.#ci.lr)(t),this.#li=!0}static get currentView(){return c(this.#pi)}static get currentScale(){return this.#di}static get dr(){return c(this.ar.canvas.hover)}static cr(t){return this.#Si.get(J(t))}static pr(){return[...this.#Si.values()]}static#Ai(t){(this.#mi?.canvasId??-1)!=t&&(this.#mi&&this.#Si.clear(),this.#mi=this.#gi.get(t),this.#m.wt(this.#Jt,this.#mi))}static get gr(){return this.#mi}static get mr(){return this.#fi}static get gr(){return this.#mi}static Sr(t){return this.#m.xt(this.#Xt,t)}static nr(t,i){return this.#m.Ct(`${this.#Yt}_${t}`,i)}static hr(t,i){return this.#m.Ct(`${this.#jt}_${t}`,i)}static yr(t){return this.#m.Ct(this.#Kt,t)}static Er(t){return this.#m.Ct(this.#ti,t)}static vr(t){return this.#m.Ct(this.#Jt,t)}static Ar(t){return this.#m.Ct(this.#qt,t)}static _r(t){return this.#m.Ct(this.#Zt,t)}static wr(t){return this.#m.Ct(this.#Qt,t)}static Tr(t){return this.#m.Ct(this.#ii,t)}}class ft{jt;gr;br=new Map;Cr=new Map}class dt{Mr;Pr;Or;Rr;kr;Nr;br=[];Dr=!1;Lr=!1;Ir=!1;$r=!1;Vr=!1}class pt{Ei;Mr;Hr;Ur;Fr;zr;Dr=!1;Wr=!1;Br}class gt{static#Ni=1;static#Di=2;static#Li=3;static#Ii=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),e=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),r=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),n=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{Gr:t=>(t=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.gr.Ke+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),Ut:()=>t,Xr:()=>i,Yr:()=>s,jr:()=>e,Kr:()=>r,qr:()=>n,Zr:(t,i)=>((t,i)=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.gr.Ke+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.Fr)(t,i)}})();static#$i=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#m=new g;#_;#Vi;#Hi=!1;#Ui=!1;#Fi=4;#zi=new Map;#Wi=[];#Bi=1;constructor(t){this.#_=t}Qr(){if(this.#_.jt&&lt.gr&&(!this.#Vi||!this.#Hi||this.#Vi.gr!==lt.gr||this.#Vi.jt!==this.#_.jt)){for(let[t]of this.#zi.values())t.terminate();this.#zi.clear(),this.#Wi=[],this.#Vi=new ft,this.#Vi.gr=lt.gr,this.#Vi.jt=this.#_.jt,lt.gr.Qe||this.#Gi(this.#Vi)}}async#Gi(t){const i=new r;i.st=gt.#Ii.Gr.bind(gt,t),i.et=r.G,i.nt=this.#Hi,i.ht=this.#Hi;const s=await i.ct();if(!s.Et()&&404!==s.dt&&s.ft){for(let[i,e]of Object.entries(s.ft)){const s=new pt;t.br.set(i,s),s.Ur=i,s.Fr=e[gt.#Ii.Ut()],s.Ei=[e[gt.#Ii.Xr()],e[gt.#Ii.Yr()]],s.Mr=tt(s.Ei,t.gr.qe),s.Hr=[e[gt.#Ii.jr()],e[gt.#Ii.Kr()]],s.zr=e[gt.#Ii.qr()],s.Dr=!1,s.Wr=!1;let r=s.Mr[0]>>8,n=s.Mr[1]>>8,h=s.Mr[0]+s.Hr[0]-1>>8,a=s.Mr[1]+s.Hr[1]-1>>8;for(let i=r;i<=h;++i)for(let e=n;e<=a;++e){const r=J([i,e]);let n=t.Cr.get(r);n||(n=new dt,n.Mr=[i,e],t.Cr.set(r,n)),n.br.push(s)}}if(t===this.#Vi)if(this.#Ui)this.#Xi(t);else for(let i of lt.pr())this.#Yi(t,J(i.coords))}}#Xi(t){if(t&&0!==t.br.size){for(let i of t.br.values())i.Dr||this.#ji(t,i);for(let i of t.Cr.values())i.Dr=!0}}#Yi(t,i){const s=t?.Cr.get(i);if(s&&!s.Dr){s.Dr=!0;for(let i of s.br)i.Dr||this.#ji(t,i)}}async#ji(t,i){if(!t)return;i.Dr=!0;const s=new r;s.st=gt.#Ii.Zr.bind(gt,t,i),s.et=r.W,s.nt=this.#Hi,s.ht=this.#Hi;const e=await s.ct();!e.Et()&&404!==e.dt&&e.ft&&(i.Br=await createImageBitmap(e.ft),i.Wr=!0)}get nt(){return this.#Hi}set nt(t){this.#Hi!==t&&(this.#Hi=t,this.#m.wt(gt.#Ni,this.#Hi))}get Jr(){return this.#Ui}set Jr(t){this.#Ui!==t&&(this.#Ui=t,this.#m.wt(gt.#Di,this.#Ui),this.#Ui&&this.#Xi(this.#Vi))}get tn(){return this.#Fi}set tn(t){this.#Fi!==t&&(this.#Fi=t,this.#m.wt(gt.#Li,this.#Fi))}get sn(){return this.#Vi}en(t,i){const s=this.#Ki(J(t),i);switch(i){case 1:return s?.Pr;case 2:return s?.Or;case 4:return s?.Rr;default:return null}}rn(t){const{Me:i,Pe:s,Oe:e,Re:r}=st(t),n=this.#Ki(J([i,s]),1);if(!n||!n.Lr)return;const h=it([e,r]);return n.kr[h]?n.Nr[h]:null}set nn(t){this.#Bi=t}#Ki(t,i){const s=this.#Vi.Cr.get(t);if(!s||s.Vr)return s;switch(i){case 1:if(s.Lr||!s.br.every((t=>t.Wr)))return s;break;case 2:if(s.$r)return s;break;case 4:if(s.Ir)return s;break;default:return null}return s.Vr=!0,this.#Wi.push(s),s}hn(){if(this.#Vi&&0!==this.#Wi.length&&!(this.#zi.size>=this.#Fi))for(;0!==this.#Wi.length&&this.#zi.size<this.#Fi;)this.#qi()}#qi(){this.#Zi(this.#Vi,this.#Wi.shift())}#Zi(t,i){if(!i)return;let s=0;if(1&this.#Bi&&!i.Lr&&(s|=1),2&this.#Bi&&!i.$r&&(s|=2),4&this.#Bi&&!i.Ir&&(s|=4),0===s)return void(i.Vr=!1);const e=lt.cr(i.Mr);if(!(i.$r||e&&e.rr))return void(i.Vr=!1);if(!i.Lr){if(!i.br.every((t=>t.Wr)))return void(i.Vr=!1);i.Pr=T("canvas",{width:Z,height:Z});const t=i.Pr.getContext("2d");for(let s of i.br)t.drawImage(s.Br,s.Mr[0]-(i.Mr[0]<<8),s.Mr[1]-(i.Mr[1]<<8))}const r=new Array(7);i.Lr?(r[0]=2,r[2]=i.kr,r[3]=i.Nr):(r[0]=1,r[2]=i.Pr.getContext("2d").getImageData(0,0,Z,Z).data,r[3]=null,i.Pr=null),r[1]=s,r[4]=2&s?e.sr:null,r[5]=t.gr.Je,r[6]=t.gr.Ze;const n=J(i.Mr),h=new Worker(gt.#$i),a=new Map;h.addEventListener("error",(t=>{console.log("Error",n,[this.#Bi,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",n,[this.#Bi,s],t)})),h.addEventListener("message",(s=>{const[e,r,o,c,u,l]=s.data;if(h.terminate(),this.#zi.delete(n),i.Vr=!1,e){if(r&&(i.kr=r,i.Nr=o,i.Pr=T("canvas",{width:Z,height:Z}),i.Pr.getContext("2d").putImageData(new ImageData(c,Z,Z),0,0),i.Lr=!0),u){for(let[s,e]of a.entries()){let r=s<<2;const[n,h,a,o]=this.#Qi(i,s,t.gr.tr[127&e]);u[r++]=n,u[r++]=h,u[r++]=a,u[r]=o}i.Or=T("canvas",{width:Z,height:Z}),i.Or.getContext("2d").putImageData(new ImageData(u,Z,Z),0,0),i.$r=!0}l&&(i.Rr=T("canvas",{width:Q,height:Q}),i.Rr.getContext("2d").putImageData(new ImageData(l,Q,Q),0,0),i.Ir=!0)}else t.Cr.delete(n)})),this.#zi.set(n,[h,i.$r?null:a]),h.postMessage(r)}#Qi(t,i,s){if(t.kr[i]){const e=t.Nr[i];return[...e===this.#Vi.gr.tr[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#Vi.gr.Je[e]):(this.#Vi.gr.Je[e],[255,0,0]),255]}return[0,0,0,0]}an(t){return this.#m.Ct(gt.#Ni,t)}on(t){return this.#m.Ct(gt.#Di,t)}cn(t){return this.#m.Ct(gt.#Li,t)}be(){this.#_.Kt(this.Qr.bind(this)),lt.vr(this.Qr.bind(this)),lt.Ar((t=>this.#Yi(this.#Vi,J(t.coords)))),lt.wr((t=>t.forEach((t=>{const i=J(t),s=this.#Vi?.Cr.get(i);if(s){const t=this.#zi?.get(i);t&&(t[0].terminate(),this.#zi.delete(i),s.Vr=!1),s.Or=null,s.$r=!1}})))),lt.Er(((t,i,s)=>{const e=J([t,i]),r=this.#Vi?.Cr.get(e);if(!r)return;const n=this.#zi.get(e);if(r.$r||n&&null===n[1]){const t=r.Or.getContext("2d");for(let[i,e,n]of s){n=this.#Vi.gr.tr[127&n];const s=it([i,e]),h=new Uint8ClampedArray(this.#Qi(r,s,n));t.putImageData(new ImageData(h,1,1),i,e)}}else if(n)for(let[t,i,e]of s){e=this.#Vi.gr.tr[127&e];const s=it([t,i]);n[1].set(s,e)}})),this.Qr()}}class mt{static#Ji=1;static#ts=2;#m=new g;#is;#ss=!0;#es=!0;#rs=!1;constructor(i){this.#is=i,t.document.addEventListener("keydown",(t=>{if(this.#ss&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&"KeyZ"===t.code&&!t.repeat){if(0!==lt.ar.canvas.pencilMode)return;this.#rs=!0;const t=lt.dr;if(t)return void this.#ns(tt(t,lt.gr.qe))}})),t.document.addEventListener("keyup",(t=>{"KeyZ"===t.code&&(this.#rs=!1)})),lt.Tr(((t,i)=>{let s;i.addEventListener("touchstart",(t=>{1===t.touches.length&&0===lt.ar.canvas.pencilMode?(s=this.#hs(t.touches[0]),this.#ns(s)):s=null})),i.addEventListener("touchmove",(t=>{if(!s||1!==t.touches.length||!lt.ar.gui.holdPaint)return;const i=this.#hs(t.touches[0]);s[0]===i[0]&&s[1]===i[1]||(s=i,this.#ns(s))}))}))}#hs(t){if(!t)return null;const{width:i,height:s}=t.target,{clientX:e,clientY:r}=t,n=lt.currentScale,[h,a]=lt.currentView,o=Math.floor((e-i/2)/n+h),c=Math.floor((r-s/2)/n+a);return tt([o,c],lt.gr.qe)}#ns([t,i]){const s=lt.ar;if(!this.#ss||lt.gr.Qe||lt.currentScale<3)return;const e=this.#is.rn([t,i]);if(Number.isInteger(e)){if(s.canvas.selectedColor!==e){const t=s.gui.mute;t||lt.ur({type:"s/TGL_MUTE"}),lt.ur({type:"SELECT_COLOR",color:e}),t||lt.ur({type:"s/TGL_MUTE"})}!s.gui.holdPaint&&this.#rs&&(lt.ur({type:"s/SET_HOLD_PAINT",value:!0,immediate:!0}),lt.ur({type:"s/SET_HOLD_PAINT",value:!1,immediate:!1}))}}get un(){return this.#ss}set un(t){this.#ss!==t&&(this.#ss=t,this.#m.wt(mt.#Ji,t))}get ln(){return this.#es}set ln(t){this.#es!==t&&(this.#es=t,this.#m.wt(mt.#ts,t))}fn(t){return this.#m.Ct(mt.#Ji,t)}dn(t){return this.#m.Ct(mt.#ts,t)}be(){let t;lt.hr("SET_HOVER",(({hover:t})=>{0===lt.ar.canvas.pencilMode&&this.#ns(tt(t,lt.gr.qe))})),lt.nr("REC_SET_PXLS",(()=>{this.#es&&(t=lt.ar.gui.mute,t||lt.ur({type:"s/TGL_MUTE"}))})),lt.hr("REC_SET_PXLS",(()=>{this.#es&&(t||lt.ur({type:"s/TGL_MUTE"}))}))}}class St{static#as=1;static#os=2;static#cs=3;static#us=4;static#ls=5;#m=new g;#fs=T("canvas");#is;#ds;#ps;#gs=!1;#ms=!1;#Ss=!0;#ys=!1;#Es=8;constructor(t,i,s){this.#is=t,this.#ds=i,this.#ps=s}#vs(){const t=this.#ds.ds.Bi;let i=this.#ds.pi.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#ps.Bi;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const e=this.#is.sn;if(e?.gr.Qe??1)return;const r=lt.currentScale,n=t.getContext("2d"),h=s.getContext("2d");n.reset(),h.reset();const a=r<1;n.imageSmoothingEnabled=a,n.msImageSmoothingEnabled=a,n.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===e.Cr.size||lt.ar.canvas.isHistoricalView||(this.#gs?this.#As(h):this.#ds.ws===this.#ds.ds&&(this.#_s(n),r>=3&&this.#ws(n))),this.#ys&&this.#Ts(h)}#_s(t){if(lt.currentScale<.5)return;const i=this.#ms?2:1;this.#bs(t,(t=>this.#is.en(t,i)),lt.dr??lt.currentView,!1,Z)}#As(t){if(lt.currentScale<.5)return;const i=this.#Ss&&lt.currentScale>=this.#Es?4:this.#ms?2:1;this.#bs(t,(t=>this.#is.en(t,i)),lt.currentView,!0,4===i?Q:Z)}#bs(t,i,s,e,r){const n=this.#is.sn.gr.qe,h=lt.currentScale,{pn:a,gn:o}=((t,i)=>{const[s,e]=tt(t,i);return{Me:Math.floor(s/Z),Pe:Math.floor(e/Z),Oe:s%Z,Re:e%Z,pn:s,gn:e}})([Math.floor(s[0]),Math.floor(s[1])],n),c=(t.canvas.width>>1)/h,u=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-c-.5),0),d=Math.max(Math.ceil(o-u-.5),0),p=Math.min(Math.ceil(a+c+.5),n),g=Math.min(Math.ceil(o+u+.5),n),{Me:m,Pe:S}=st([l,d]),{Me:y,Pe:E}=st([p,g]),v=y-m+1,A=E-S+1,_=this.#fs.getContext("2d");this.#fs.width=v*r,this.#fs.height=A*r,_.reset();for(let t=0;t<v;++t)for(let s=0;s<A;++s){const e=i([m+t,S+s]);e&&_.drawImage(e,t*r,s*r)}const w=r/Z,T=h/w;let b=c-.5-a+m*Z,C=u-.5-o+S*Z;e&&(b+=.5-f(s[0]),C+=.5-f(s[1])),t.scale(T,T),t.drawImage(this.#fs,b*w,C*w)}#ws(t){const i=lt.currentScale,s=.3*i,e=t.canvas.width>>1,r=t.canvas.height>>1;t.resetTransform(),t.lineWidth=s,t.strokeStyle="darkblue",t.strokeRect(e-.65*i,r-.65*i,i+s,i+s)}#Ts(t){const i=lt.currentScale;let s=lt.currentView,e=lt.dr;const[r,n]=[f(s[0])-.5,f(s[1])-.5];s=tt([Math.floor(s[0]),Math.floor(s[1])],lt.gr.size),e=e?tt(e,lt.gr.size):s;const h=.3*i,a=t.canvas.width>>1,o=t.canvas.height>>1;t.resetTransform(),t.lineWidth=h,t.strokeStyle="darkblue",t.strokeRect(a-i*(.65+s[0]-e[0]+r),o-i*(.65+s[1]-e[1]+n),i+h,i+h)}get mn(){return this.#gs}set mn(t){this.#gs!==t&&(this.#gs=t,this.#m.wt(St.#as,this.#gs))}get Sn(){return this.#ys}set Sn(t){this.#ys!==t&&(this.#ys=t,this.#m.wt(St.#os,this.#ys))}get yn(){return this.#ms}set yn(t){this.#ms!==t&&(this.#ms=t,this.#Cs(),this.#m.wt(St.#cs,this.#ms))}get En(){return this.#Ss}set En(t){this.#Ss!==t&&(this.#Ss=t,this.#Cs(),this.#m.wt(St.#us,this.#Ss))}get vn(){return this.#Es}set vn(t){this.#Es!==t&&(this.#Es=t,this.#m.wt(St.#ls,this.#Es))}An(t){return this.#m.Ct(St.#as,t)}_n(t){return this.#m.Ct(St.#os,t)}wn(t){return this.#m.Ct(St.#cs,t)}Tn(t){return this.#m.Ct(St.#us,t)}bn(t){return this.#m.Ct(St.#ls,t)}#Cs(){let t=1;this.#gs&&this.#Ss&&lt.currentScale>=this.#Es?t|=4:this.#ms&&(t|=2),this.#is.nn=t}be(){const t=()=>{this.#vs(),this.#Cs(),this.#is.hn(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class yt extends K{static#xs=1;static#Ms=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#Ps=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);Cn;xn;un;constructor(){super(yt.#xs,yt.#Ms(),yt.#Ps(),!1),this.pe.vt("hardcodeColors")||this.pe.l("hardcodeColors",!1),lt.init(this.pe.u("hardcodeColors")),this.Cn=new gt(this.Xt),this.xn=new St(this.Cn,this.ge,this.me),this.un=new mt(this.Cn),this.Ee.oe("pixelplanet"),this.Ee.ne("keyZ","keyZ"),this.ge.gs.ji.addEventListener("click",(()=>{this.ve()&&window.alert(this.translations.Dt("resetSettingsFullMessage"))})),t.addEventListener("load",(async()=>{if(await this.Xt.Gt(!0),this.Xt.Xt[0]?.It()!==function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))return;this.Ae(),this.bind(),this._e(),this.we(),this.Te();const t=()=>{this.be()};if(lt.gr)t();else{const i=lt.vr((()=>{i(),t()}))}}),{once:!0})}ve(){this.Cn.nt=!1,this.Cn.Jr=!1,this.Cn.tn=4,this.xn.mn=!1,this.xn.Sn=!1,this.xn.yn=!1,this.xn.En=!1,this.xn.vn=8,this.un.un=!1,this.un.ln=!1;const t=this.pe.u("hardcodeColors");return t&&this.pe.l("hardcodeColors",!1),super.ve()||t}Ae(){super.Ae(),this.Cn.nt=!1,this.Cn.Jr=!1,this.Cn.tn=4,this.xn.mn=!1,this.xn.Sn=!1,this.xn.yn=!1,this.xn.En=!1,this.xn.vn=8,this.un.un=!1,this.un.ln=!1}bind(){super.bind(),this.Cn.nt=this.pe.u("useCache",this.Cn.nt),this.pe.l("useCache",this.Cn.nt),this.Cn.an((t=>this.pe.l("useCache",t))),this.Cn.Jr=this.pe.u("loadAllTemplates",this.Cn.Jr),this.pe.l("loadAllTemplates",this.Cn.Jr),this.Cn.on((t=>this.pe.l("loadAllTemplates",t))),this.Cn.tn=this.pe.u("maxWorkers",this.Cn.tn),this.pe.l("maxWorkers",this.Cn.tn),this.Cn.cn((t=>this.pe.l("maxWorkers",t))),this.xn.mn=this.pe.u("overlay",this.xn.mn),this.pe.l("overlay",this.xn.mn),this.xn.An((t=>this.pe.l("overlay",t))),this.xn.yn=this.pe.u("errorDetector",this.xn.yn),this.pe.l("errorDetector",this.xn.yn),this.xn.wn((t=>this.pe.l("errorDetector",t))),this.xn.En=this.pe.u("smallPixel",this.xn.En),this.pe.l("smallPixel",this.xn.En),this.xn.Tn((t=>this.pe.l("smallPixel",t))),this.xn.Sn=this.pe.u("overlayPixel",this.xn.Sn),this.pe.l("overlayPixel",this.xn.Sn),this.xn._n((t=>this.pe.l("overlayPixel",t))),this.xn.vn=this.pe.u("minScaleSmallPixel",this.xn.vn),this.pe.l("minScaleSmallPixel",this.xn.vn),this.xn.bn((t=>this.pe.l("minScaleSmallPixel",t))),this.un.un=this.pe.u("autoColorSelect",this.un.un),this.pe.l("autoColorSelect",this.un.un),this.un.fn((t=>this.pe.l("autoColorSelect",t))),this.un.ln=this.pe.u("disablePlacedPixelSound",this.un.ln),this.pe.l("disablePlacedPixelSound",this.un.ln),this.un.dn((t=>this.pe.l("disablePlacedPixelSound",t)))}_e(){super._e(),this.ge.Ui(t.document.body,3),this.me.Ui(t.document.body)}we(){super.we()}Te(){super.Te();const i=this.Se.js("overlay",(()=>this.xn.mn=!0),(()=>this.xn.mn=!1));i.Vs(this.xn.mn,!1),this.xn.An((t=>i.Vs(t,!1)));const s=this.Se.js("errorDetector",(()=>this.xn.yn=!0),(()=>this.xn.yn=!1));s.Vs(this.xn.yn,!1),this.xn.wn((t=>s.Vs(t,!1)));const e=this.Se.js("autoColorSelect",(()=>this.un.un=!0),(()=>this.un.un=!1));e.Vs(this.un.un,!1),this.un.fn((t=>e.Vs(t,!1)));const r=this.Se.js("smallPixel",(()=>this.xn.En=!0),(()=>this.xn.En=!1));r.Vs(this.xn.En,!1),this.xn.Tn((t=>r.Vs(t,!1)));const n=this.Se.qs("minScaleSmallPixel",(t=>this.xn.vn=2**(t/10)),16,53,1);n.l(Math.round(10*Math.log2(this.xn.vn)),!1),this.xn.bn((t=>n.l(Math.round(10*Math.log2(t)),!1)));const h=this.Se.js("useCache",(()=>this.Cn.nt=!0),(()=>this.Cn.nt=!1));h.Vs(this.Cn.nt,!1),this.Cn.an((t=>h.Vs(t,!1)));const a=this.Se.js("loadAllTemplates",(()=>this.Cn.Jr=!0),(()=>this.Cn.Jr=!1));a.Vs(this.Cn.Jr,!1),this.Cn.on((t=>a.Vs(t,!1)));const o=this.Se.js("disablePlacedPixelSound",(()=>this.un.ln=!0),(()=>this.un.ln=!1));o.Vs(this.un.ln,!1),this.un.dn((t=>o.Vs(t,!1)));const c=this.Se.js("overlayPixel",(()=>this.xn.Sn=!0),(()=>this.xn.Sn=!1));c.Vs(this.xn.Sn,!1),this.xn._n((t=>c.Vs(t,!1)));this.Se.js("hardcodeColors",(()=>{this.pe.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.pe.l("hardcodeColors",!1),t.location.reload()})).Vs(this.pe.u("hardcodeColors"),!1);const u=this.Se.qs("maxWorkers",(t=>this.Cn.tn=t),1,32,1);u.l(this.Cn.tn,!1),this.Cn.cn((t=>u.l(t,!1))),this.Se.Zs({minimap:["overlay","overlayTransparency","errorDetector","smallPixel","autoColorSelect"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize","secondsTabSwitchDelay"],advanced:["useCache","loadAllTemplates","disablePlacedPixelSound","overlayPixel","hardcodeColors","maxWorkers","minScaleSmallPixel"]});const l=this.ye.ne("overlay",{overlayOn:{action:()=>this.xn.mn=!0,ee:"overlay_on.png",se:"overlayOff"},overlayOff:{action:()=>this.xn.mn=!1,ee:"overlay_off.png",se:"overlayOn"}});l.re(this.xn.mn?"overlayOn":"overlayOff",!1),this.xn.An((t=>l.re(t?"overlayOn":"overlayOff",!1)));const f=this.ye.ne("errorDetector",{errorDetectorOn:{action:()=>this.xn.yn=!0,ee:"errorDetector_on.png",se:"errorDetectorOff"},errorDetectorOff:{action:()=>this.xn.yn=!1,ee:"errorDetector_off.png",se:"errorDetectorOn"}});f.re(this.xn.yn?"errorDetectorOn":"errorDetectorOff",!1),this.xn.wn((t=>f.re(t?"errorDetectorOn":"errorDetectorOff",!1)));const d=this.ye.ne("smallPixel",{smallPixelOn:{action:()=>this.xn.En=!0,ee:"smallPixel_on.png",se:"smallPixelOff"},smallPixelOff:{action:()=>this.xn.En=!1,ee:"smallPixel_off.png",se:"smallPixelOn"}});d.re(this.xn.En?"smallPixelOn":"smallPixelOff",!1),this.xn.Tn((t=>d.re(t?"smallPixelOn":"smallPixelOff",!1)));const p=this.ye.ne("autoColorSelect",{autoColorSelectOn:{action:()=>this.un.un=!0,ee:"autoColorSelect_on.png",se:"autoColorSelectOff"},autoColorSelectOff:{action:()=>this.un.un=!1,ee:"autoColorSelect_off.png",se:"autoColorSelectOn"}});p.re(this.un.un?"autoColorSelectOn":"autoColorSelectOff",!1),this.un.fn((t=>p.re(t?"autoColorSelectOn":"autoColorSelectOff",!1))),this.ye.ae(["overlay","errorDetector","smallPixel","autoColorSelect"]),this.ge.Es.ls()}be(){super.be(),this.Cn.be(),this.xn.be(),this.un.be()}}(()=>{const i=[{Mn:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,Pn:yt}];for(let{Mn:s,Pn:e}of i)if(s.test(t.location.href)){new e;break}})()})();